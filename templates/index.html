{{ template "base.html" . }}
{{ define "body" }}
<div class="ui grid">
  <div class="twelve wide column">
    <div class="ui secondary pointing menu">
      <div class="header item">话题首页</div>
      <div class="right menu">
        <a class="item{{ if eq .active "LatestReply" }} active{{ end }}" href="/">
          最近回复
        </a>
        <a class="item{{ if eq .active "Latest" }} active{{ end }}" href="/topics/latest">
          最近发布
        </a>
        <a class="item{{ if eq .active "NoReply" }} active{{ end }}" href="/topics/no_reply">
          尚未回复
        </a>
  </div>
</div>
    <div class="ui items segment">
      {{ template "partials/pagination.html" .}}
      {{ range .topics }}
      {{ $creater := .Creater $.db }}
      {{ $node := .Node $.db }}
      <div class="item" style="border-top: 1px solid #dddddd; padding: 14px 0 0 0;">
        <a class="ui mini label{{ if eq .CommentCount 0 }} blue{{ end }}" style="height: 24px;" href="/t/{{ .Id_.Hex }}#comments">
          {{ .CommentCount }} 回复
        </a>
        <div class="content" style="padding-left: 21px;">
          <a href="/t/{{ .Id_.Hex }}" class="header" style="font-size: 16px;">{{ truncate .Title 40 "..." }}</a>
          <div class="meta">
            <a class="label label-info" href="/go/{{$node.Id}}">{{$node.Name}}</a> •
            <a href="/member/{{$creater.Username}}"><strong>{{$creater.Username}}</strong></a> •
            {{ if .CommentCount }}
            {{ $latestReplier := .LatestReplier $.db }}
              <time datetime="{{formatdatetime .LatestRepliedAt}}" title="{{ formatdatetime .LatestRepliedAt }}">{{ formattime .LatestRepliedAt }}</time> •
              最后回复来自 <a href="/member/{{ $latestReplier.Username }}">{{ $latestReplier.Username }}</a>
            {{ else }}
              <time datetime="{{ formatdatetime .CreatedAt }}" title="{{ formatdatetime .CreatedAt }}">{{ formattime .CreatedAt }}</time>
            {{ end }}
          </div>
        </div>
      </div>
      {{ end }}

      {{ template "partials/pagination.html" .}}
    </div>
  </div>

  <div class="four wide column">
    <div class="ui segment">
    </div>
  </div>
</div>
{{ end }}
